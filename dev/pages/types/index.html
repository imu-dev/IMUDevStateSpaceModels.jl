<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Models · IMUDevStateSpaceModels</title><meta name="title" content="Models · IMUDevStateSpaceModels"/><meta property="og:title" content="Models · IMUDevStateSpaceModels"/><meta property="twitter:title" content="Models · IMUDevStateSpaceModels"/><meta name="description" content="Documentation for IMUDevStateSpaceModels."/><meta property="og:description" content="Documentation for IMUDevStateSpaceModels."/><meta property="twitter:description" content="Documentation for IMUDevStateSpaceModels."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">IMUDevStateSpaceModels</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Models</a><ul class="internal"><li><a class="tocitem" href="#Interface"><span>Interface</span></a></li><li><a class="tocitem" href="#Gaussian-State-Space-Models"><span>Gaussian State Space Models</span></a></li><li><a class="tocitem" href="#Linear-Gaussian-State-Space-Model"><span>Linear Gaussian State Space Model</span></a></li><li><a class="tocitem" href="#Example-of-a-Non-linear-Non-Gaussian-State-Space-Model"><span>Example of a Non-linear Non-Gaussian State Space Model</span></a></li></ul></li><li><a class="tocitem" href="../sampling/">Sampling</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Models</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/main/docs/src/pages/types.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="State-Space-Models"><a class="docs-heading-anchor" href="#State-Space-Models">State Space Models</a><a id="State-Space-Models-1"></a><a class="docs-heading-anchor-permalink" href="#State-Space-Models" title="Permalink"></a></h1><h2 id="Interface"><a class="docs-heading-anchor" href="#Interface">Interface</a><a id="Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Interface" title="Permalink"></a></h2><p>All State Space Models defined in this package must adhere to the interface defined by the <code>StateSpaceModel</code> below.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.StateSpaceModel" href="#IMUDevStateSpaceModels.StateSpaceModel"><code>IMUDevStateSpaceModels.StateSpaceModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Parent type to all State Space Models. <code>T</code> is the eltype of state.</p><p>In this package we deal with models of the form:</p><p class="math-container">\[\begin{cases}
x_{k+1} &amp;= f(x_k) + ω_k,\qquad ω_k \sim Ω,\\
y_k &amp;= g(x_k) + δ_k,\qquad δ_k \sim Δ,
\end{cases}\]</p><p>where</p><ul><li><span>$x_k$</span> is the state,</li><li><span>$y_k$</span> is the observation,</li><li><span>$f$</span> is the state transition function,</li><li><span>$g$</span> is the observation function,</li><li><span>$ω_k$</span> is the state noise,</li><li><span>$δ_k$</span> is the observation noise,</li><li><span>$Ω$</span> is the distribution of the state noise, and</li><li><span>$Δ$</span> is the distribution of the observation noise.</li></ul><p>In particular, we <strong>do not</strong> deal with control inputs and we assume a linearly additive noise model.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>We assume that the state is given by a vector (even a scalar-valued state is represented as a vector of length 1). The same applies to the observations. (At least for now... We might change this in the future, depending on the needs that will arise.)</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L1-L32">source</a></section></article><p>The Julia type used for representation of the state and observation spaces should be known at compile time:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.eltype-Tuple{StateSpaceModel}" href="#Base.eltype-Tuple{StateSpaceModel}"><code>Base.eltype</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Base.eltype(::StateSpaceModel{T})</code></pre><p>eltype of the state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L35-L39">source</a></section></article><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Note however, that this does not necessarily prevent auto-promotion of variables. For instance, if <a href="#IMUDevStateSpaceModels.state_transition"><code>state_transition</code></a> below was called on a <code>StateSpaceModel</code> with <code>Float32</code> eltype and a <a href="https://github.com/JuliaDiff/DualNumbers.jl">DualNumber</a> <code>Dual{Float32}</code>, we would still expect each dimension of the state to be auto-promoted to <code>Dual{Float32}</code>.</p></div></div><h3 id="Functions-that-must-be-implemented"><a class="docs-heading-anchor" href="#Functions-that-must-be-implemented">Functions that must be implemented</a><a id="Functions-that-must-be-implemented-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-that-must-be-implemented" title="Permalink"></a></h3><p>Each concrete implementation of <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> must implement the following functions defining its dynamics:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.state_transition" href="#IMUDevStateSpaceModels.state_transition"><code>IMUDevStateSpaceModels.state_transition</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">state_transition(x, m::StateSpaceModel)</code></pre><p>State transition function <span>$f$</span> of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> <code>m</code>.</p><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> must override this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L42-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.observation_emission" href="#IMUDevStateSpaceModels.observation_emission"><code>IMUDevStateSpaceModels.observation_emission</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">observation_emission(x, m::StateSpaceModel)</code></pre><p>Observation function <span>$g$</span> of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> <code>m</code>.</p><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> must override this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L53-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.state_noise-Tuple{StateSpaceModel}" href="#IMUDevStateSpaceModels.state_noise-Tuple{StateSpaceModel}"><code>IMUDevStateSpaceModels.state_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">state_noise(m::StateSpaceModel)</code></pre><p>State noise generator <span>$Ω$</span> of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> <code>m</code>.</p><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> must override this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L66-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.observation_noise-Tuple{StateSpaceModel}" href="#IMUDevStateSpaceModels.observation_noise-Tuple{StateSpaceModel}"><code>IMUDevStateSpaceModels.observation_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">observation_noise(m::StateSpaceModel)</code></pre><p>Observation noise generator <span>$Δ$</span> of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> <code>m</code>.</p><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> must override this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L77-L85">source</a></section></article><p>As well as functions defining the size of its state space and observation space.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.size-Tuple{StateSpaceModel}" href="#Base.size-Tuple{StateSpaceModel}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Base.size(m::StateSpaceModel)</code></pre><p>Return lengths of the state and observation vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L88-L92">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.size-Tuple{StateSpaceModel, Symbol}" href="#Base.size-Tuple{StateSpaceModel, Symbol}"><code>Base.size</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Base.size(m::StateSpaceModel, s::Union{Symbol,Val{:state},Val{:observation},Val{:obs})</code></pre><p>Length of the state or observation vectors depending on the value of <code>s</code>:</p><ul><li><code>s=:state</code> or <code>s=Val{:state}</code>: length of the state,</li><li><code>s=:observation</code> or <code>s=:obs</code> or <code>s=Val{:observation}</code> or <code>s=Val{:obs}</code>: length of the observation.</li></ul><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> must override functions <code>Base.size(m::StateSpaceModel, ::Val{:state})</code> and <code>Base.size(m::StateSpaceModel, ::Union{Val{:observation},Val{:obs}})</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L95-L106">source</a></section></article><h3 id="Functions-that-will-work-out-of-the-box"><a class="docs-heading-anchor" href="#Functions-that-will-work-out-of-the-box">Functions that will work out of the box</a><a id="Functions-that-will-work-out-of-the-box-1"></a><a class="docs-heading-anchor-permalink" href="#Functions-that-will-work-out-of-the-box" title="Permalink"></a></h3><p>Based on these 6 definitions (4 dynamics definitions and 2 size definitions) the following evolution function will work out of the box:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.step" href="#IMUDevStateSpaceModels.step"><code>IMUDevStateSpaceModels.step</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">step(rng::AbstractRNG, m::StateSpaceModel,
     x::Union{&lt;:AbstractVector,&lt;:AbstractMatrix};
     state_noise_gen=state_noise(m), obs_noise_gen=observation_noise(m))</code></pre><p>Perform a single (random) step:</p><p class="math-container">\[\begin{cases}
x° &amp;= f(x_k) + ω_k,\qquad ω_k \sim Ω,\\
y° &amp;= g(x°) + δ_k,\qquad δ_k \sim Δ,
\end{cases}\]</p><ul><li>for a single state <span>$xₖ :=$</span> <code>x</code> if <code>x</code> is a vector, or</li><li>for a batch of states <span>$xₖ⁽ⁱ⁾ :=$</span> <code>x[:, i]</code> if <code>x</code> is a matrix.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L168-L184">source</a></section></article><p>Under the hood it will call these two functions:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.state_step" href="#IMUDevStateSpaceModels.state_step"><code>IMUDevStateSpaceModels.state_step</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">state_step(rng::AbstractRNG, m::StateSpaceModel,
           x::Union{&lt;:AbstractVector, &lt;:AbstractMatrix};
           noise_gen=state_noise(m))</code></pre><p>Perform a single (random) step:</p><p class="math-container">\[f(x_k) + ω_k,\quad ω_k \sim Ω\]</p><ul><li>for a single state <span>$xₖ :=$</span> <code>x</code> if <code>x</code> is a vector, or</li><li>for a batch of states <span>$xₖ⁽ⁱ⁾ :=$</span> <code>x[:, i]</code> if <code>x</code> is a matrix.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L123-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.obs_step" href="#IMUDevStateSpaceModels.obs_step"><code>IMUDevStateSpaceModels.obs_step</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">obs_step(rng::AbstractRNG, m::StateSpaceModel,
         x::Union{&lt;:AbstractVector, &lt;:AbstractMatrix};
         noise_gen=observation_noise(m))</code></pre><p>Perform a single (random) observation step:</p><p class="math-container">\[g(x_k) + δ_k,\quad δ_k \sim Δ\]</p><ul><li>for a single state <span>$xₖ :=$</span> <code>x</code> if <code>x</code> is a vector, or</li><li>for a batch of states <span>$xₖ⁽ⁱ⁾ :=$</span> <code>x[:, i]</code> if <code>x</code> is a matrix.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/state_space_model.jl#L146-L158">source</a></section></article><h2 id="Gaussian-State-Space-Models"><a class="docs-heading-anchor" href="#Gaussian-State-Space-Models">Gaussian State Space Models</a><a id="Gaussian-State-Space-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Gaussian-State-Space-Models" title="Permalink"></a></h2><p>Abstract type that defines the type of state and observation noise to be Gaussian. Any child struct will inherit the definitions of <span>$Ω:=N(0,Q)$</span> and <span>$Δ:=N(0,R)$</span>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.GaussianStateSpaceModel" href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>IMUDevStateSpaceModels.GaussianStateSpaceModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Parent type to Gaussian State Space Models of the form:</p><p class="math-container">\[\begin{cases}
x_{k+1} &amp;= f(x_k) + ω_k,\qquad ω_k \sim N(0, Q),\\
y_k &amp;= g(x_k) + δ_k,\qquad δ_k \sim N(0, R),
\end{cases}\]</p><p>where <span>$Q$</span> and <span>$R$</span> are the state and observation noise covariance matrices, and the remaining parameters are as in the description of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/gaussian_state_space_model.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.state_noise-Tuple{GaussianStateSpaceModel}" href="#IMUDevStateSpaceModels.state_noise-Tuple{GaussianStateSpaceModel}"><code>IMUDevStateSpaceModels.state_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">state_noise(m::GaussianStateSpaceModel)</code></pre><p>Return <span>$N(0, Q)$</span>: a (Gaussian) distribution of the state noise of the <a href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>GaussianStateSpaceModel</code></a> <code>m</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/gaussian_state_space_model.jl#L45-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.observation_noise-Tuple{GaussianStateSpaceModel}" href="#IMUDevStateSpaceModels.observation_noise-Tuple{GaussianStateSpaceModel}"><code>IMUDevStateSpaceModels.observation_noise</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">observation_noise(m::GaussianStateSpaceModel)</code></pre><p>Return <span>$N(0, R)$</span>: a (Gaussian) distribution of the observation noise of the <a href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>GaussianStateSpaceModel</code></a> <code>m</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/gaussian_state_space_model.jl#L55-L60">source</a></section></article><p>Any concrete implementation must define the following two functions:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.state_noise_cov" href="#IMUDevStateSpaceModels.state_noise_cov"><code>IMUDevStateSpaceModels.state_noise_cov</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">state_noise_cov(m::GaussianStateSpaceModel)</code></pre><p>Return the state noise covariance matrix <span>$Q$</span> of the <a href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>GaussianStateSpaceModel</code></a> <code>m</code>.</p><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>GaussianStateSpaceModel</code></a> must override this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/gaussian_state_space_model.jl#L17-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.observation_noise_cov" href="#IMUDevStateSpaceModels.observation_noise_cov"><code>IMUDevStateSpaceModels.observation_noise_cov</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">observation_noise_cov(m::GaussianStateSpaceModel)</code></pre><p>Return the observation noise covariance matrix <span>$R$</span> of the <a href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>GaussianStateSpaceModel</code></a> <code>m</code>.</p><div class="admonition is-category-default"><header class="admonition-header">Important</header><div class="admonition-body"><p>Any concrete implementation of the <a href="#IMUDevStateSpaceModels.GaussianStateSpaceModel"><code>GaussianStateSpaceModel</code></a> must override this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/gaussian_state_space_model.jl#L31-L40">source</a></section></article><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Additionally, functions <a href="#IMUDevStateSpaceModels.state_transition"><code>state_transition</code></a>, <a href="#IMUDevStateSpaceModels.observation_emission"><code>observation_emission</code></a>, and two versions of <a href="#Base.size-Tuple{StateSpaceModel}"><code>Base.size</code></a> must be implemented to satisfy the requirements of the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> interface.</p></div></div><h2 id="Linear-Gaussian-State-Space-Model"><a class="docs-heading-anchor" href="#Linear-Gaussian-State-Space-Model">Linear Gaussian State Space Model</a><a id="Linear-Gaussian-State-Space-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-Gaussian-State-Space-Model" title="Permalink"></a></h2><p><code>LinearGaussianStateSpaceModel</code> is a concrete implementation of the <code>GaussianStateSpaceModel</code> (thus in particular, also of <code>StateSpaceModel</code>&#39;s).</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.LinearGaussianStateSpaceModel" href="#IMUDevStateSpaceModels.LinearGaussianStateSpaceModel"><code>IMUDevStateSpaceModels.LinearGaussianStateSpaceModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LinearGaussianStateSpaceModel([T::DataType]; F, Q, H, R)</code></pre><p>State space model with linear dynamics, additive Gaussian noise and linear, Gaussian observations. It is given by the following set of equations:</p><p class="math-container">\[\begin{cases}
x_{t+1} &amp;= F \times x_t + w_t,\qquad w_t \sim N(0, Q)\\
y_t &amp;= H \times x_t + v_t,\qquad  v_t \sim N(0, R)
\end{cases}\]</p><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>You can use <code>LinGsnSSM</code> alias for <code>LinearGaussianStateSpaceModel</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/linear_gaussian_state_space_model.jl#L1-L16">source</a></section></article><p>The following additional functions are defined for <a href="#IMUDevStateSpaceModels.LinearGaussianStateSpaceModel"><code>LinearGaussianStateSpaceModel</code></a>:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.transition_matrix" href="#IMUDevStateSpaceModels.transition_matrix"><code>IMUDevStateSpaceModels.transition_matrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">transition_matrix(m::LinGsnSSM)</code></pre><p>Return state evolution matrix <span>$F$</span> of the <a href="#IMUDevStateSpaceModels.LinearGaussianStateSpaceModel"><code>LinearGaussianStateSpaceModel</code></a> <code>m</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/linear_gaussian_state_space_model.jl#L37-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="IMUDevStateSpaceModels.observation_matrix" href="#IMUDevStateSpaceModels.observation_matrix"><code>IMUDevStateSpaceModels.observation_matrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">observation_matrix(m::LinGsnSSM)</code></pre><p>Return the observation matrix <span>$H$</span> of the <a href="#IMUDevStateSpaceModels.LinearGaussianStateSpaceModel"><code>LinearGaussianStateSpaceModel</code></a> <code>m</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/imu-dev/IMUDevStateSpaceModels.jl/blob/fe2257288c00ec3bb61780fc694efccabc87d3a5/src/linear_gaussian_state_space_model.jl#L46-L51">source</a></section></article><h2 id="Example-of-a-Non-linear-Non-Gaussian-State-Space-Model"><a class="docs-heading-anchor" href="#Example-of-a-Non-linear-Non-Gaussian-State-Space-Model">Example of a Non-linear Non-Gaussian State Space Model</a><a id="Example-of-a-Non-linear-Non-Gaussian-State-Space-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Example-of-a-Non-linear-Non-Gaussian-State-Space-Model" title="Permalink"></a></h2><p>More general models must be implemented by the user by adhering to the <a href="#IMUDevStateSpaceModels.StateSpaceModel"><code>StateSpaceModel</code></a> interface. Below is an example of a 1-dimensional state evolving as a double-well potential with Cauchy noise and non-linear observation model perturbed by Poisson noise:</p><pre><code class="language-julia hljs">using Distributions
using IMUDevStateSpaceModels
using Plots

const SSMs = IMUDevStateSpaceModels

&quot;&quot;&quot;
    MyNonLinearStateSpaceModel()

State space model with double-well type transition function, non-linear
observation operator and non-Gaussian noise, given by:

    x_{k+1} = x_k - θ(x_k)^2((x_k)^2 - μ) + σ_k,    σ_k ∼ Cauchy(x₀, γ),
    y_k     = ceil(x_k)              + ν_k,    ν_k ∼ Poisson(λ)
&quot;&quot;&quot;
struct MyNonLinearStateSpaceModel &lt;: StateSpaceModel{Float64}
    θ::Float64
    μ::Float64
    x₀::Float64
    γ::Float64
    λ::Int64
end

const MySSM = MyNonLinearStateSpaceModel

Base.size(::MySSM, ::Union{Val{:state}}) = 1
Base.size(::MySSM, ::Union{Val{:observation},Val{:obs}}) = 1
SSMs.state_noise(m::MySSM) = Product([Cauchy(m.x₀, m.γ)])
SSMs.observation_noise(m::MySSM) = Product([Poisson(m.λ)])

SSMs.state_transition(x, m::MySSM) = x - m.θ .* x .* (x .^ 2 .- m.μ)
SSMs.observation_emission(x, ::MySSM) = ceil.(x)</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Notice that despite the model being 1-dimensional we don&#39;t treat it as a scalar-valued process, but instead, as a 1-element vector-valued process. In particular, we use the <a href="https://github.com/JuliaStats/Distributions.jl/tree/master">Distributions.jl</a> <code>Product</code> to compose Univariate distributions into a Multivariate one.</p></div></div><p>Once defined, we can define a model and, for instance, sample and plot trajectories (see <a href="../sampling/#Sampling">Sampling</a> and <a href="../plotting/#Plotting">Plotting</a> sections for more details):</p><pre><code class="language-julia hljs">using Plots

model = MySSM(0.01, 1.0, 0.0, 0.001, 1)

x₀ = [1.0]
num_timepoints = 100
xx, yy = rand(model, x₀, num_timepoints)

plot(trajectoryplot(0:num_timepoints, yy; seriestype=:scatter, label=&quot;&quot;, title=&quot;Observations&quot;),
     trajectoryplot(0:num_timepoints, xx; seriestype=:scatter, label=&quot;&quot;, title=&quot;Underlying state&quot;))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../sampling/">Sampling »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Thursday 29 February 2024 15:56">Thursday 29 February 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
